# === SPA fallback p/ React/Vite ===
RewriteEngine On
RewriteBase /

# Deixa passar arquivos e diretórios reais
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# NÃO reescrever chamadas de API / server
RewriteCond %{REQUEST_URI} ^/(api|backend|server|checkout|create-payment) [NC]
RewriteRule ^ - [L]

# Deixa passar estáticos comuns (assets do Vite, imagens, robots etc.)
RewriteRule ^(assets/|images/|img/|fonts/|css/|js/|favicon\.ico$|robots\.txt$|sitemap\.xml$) - [L,NC]

# Qualquer outra rota → index.html (SPA)
RewriteRule . index.html [L]

# (Opcional) Cache básico p/ estáticos
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/html "access plus 0 seconds"
  ExpiresByType text/css "access plus 1 week"
  ExpiresByType application/javascript "access plus 1 week"
  ExpiresByType image/* "access plus 1 month"
</IfModule>
