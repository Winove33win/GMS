# SPA fallback for React/Vite (Apache)
RewriteEngine On
RewriteBase /

# Serve existing files/directories as-is
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Do not rewrite backend paths or PHP blog
RewriteCond %{REQUEST_URI} ^/(api|blog|server|backend) [NC]
RewriteRule ^ - [L]

# Allow common static assets
RewriteRule ^(assets/|images/|img/|team/|fonts/|css/|js/|favicon\.ico$|robots\.txt$|sitemap\.xml$) - [L,NC]

# Everything else -> index.html (SPA)
RewriteRule . /index.html [L]

# Optional caching for static assets
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/html "access plus 0 seconds"
  ExpiresByType text/css "access plus 1 week"
  ExpiresByType application/javascript "access plus 1 week"
  ExpiresByType image/* "access plus 1 month"
</IfModule>
